{% extends 'base.html' %}
{% block title %}Meal Plans - PulseGym{% endblock %}
{% block content %}
<div class="nutrition-container">
    <header class="page-header"><h1>Daily Meal Plan</h1>
        {% if meal_plan %}<p class="calorie-target">Target: {{ meal_plan.caloric_target }} calories</p>{% endif %}
    </header>
    <div class="meal-tabs">
        <button class="tab-btn active" onclick="showTab('breakfast')">Breakfast</button>
        <button class="tab-btn" onclick="showTab('lunch')">Lunch</button>
        <button class="tab-btn" onclick="showTab('dinner')">Dinner</button>
    </div>
    {% for meal_type, meal_list in meals.items %}
    <div id="{{ meal_type }}" class="meal-content {% if meal_type == 'breakfast' %}active{% endif %}">
        <div class="meal-grid">
            {% for meal in meal_list %}
            <div class="meal-card">
                {% if meal.image_url %}<img src="{{ meal.image_url }}" alt="{{ meal.name }}">{% endif %}
                <div class="meal-info"><h3>{{ meal.name }}</h3>
                    <span class="calories">{{ meal.calories }} cal</span>
                    <span class="prep-time">{{ meal.prep_time }} min</span>
                </div>
            </div>
            {% empty %}<p class="no-meals">No meals added yet</p>{% endfor %}
        </div>
    </div>
    {% endfor %}
</div>
<script>
function showTab(tab) {
    document.querySelectorAll('.meal-content').forEach(c => c.classList.remove('active'));
    document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
    document.getElementById(tab).classList.add('active');
    event.target.classList.add('active');
}
</script>
{% endblock %}
